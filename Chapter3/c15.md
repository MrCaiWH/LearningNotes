# TCP和UDP的区别

UDP协议以其简单、传输快的优势，在越来越多场景下取代了TCP。

物联网采用UDP有3个关键点：

* 网络带宽需求较小，而实时性要求高；
* 大部分应用无需维持连接；
* 需要低功耗。

客户端每发送一个包，服务器端都应该有个回复，如果服务器端超过一定的时间没有回复，客户端就会重新发送这个包，直到有回复。

这个发送应答的过程是什么样呢？可以是上一个收到了应答，再发送下一个。

* 应答模式
* 超时会自动重发
* 按顺序执行每一个请求

TCP协议，为了保证顺序性，每一个包都有一个ID。在建立连接的时候，会商定起始的ID是什么，然后按照ID一个个发送。为了保证不丢包，对于发送的包都要进行应答，但是这个应答也不是一个一个来的，而是会应答某个之前的ID，表示收到了，这种模式称为累计确认或者累计应答。

TCP提供可靠支付。通过TCP连接传输的数据，无差错、不丢失、不重复、并且按序到达。
UDP不保证不丢失，不保证按顺序到达。

TCP是面向字节流的。发送的时候发的是一个流，没头没尾。
UDP可不是一个流，而是一个个的udp包，一个一个地发，一个一个地收。

TCP是可以有拥塞控制的。它意识到包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为，看看是不是发快了，要不要发慢点。
UDP就不会，应用让我发，我就发。

TCP是一个有状态服务，准确地记着发送了没有，接受到没有，发送到哪个了，应该接受哪个了，错一点儿都不行。
而UDP则是无状态服务，发出去就发出去了，不会有任何记录。

UDP简单、处理速度快，不像TCP那样，操那么多心，各种重传，保证顺序啊，前面的收不到，后面的没法处理啊。不然等这些事情做完了，时延早就上去了。而TCP在网络不好出现丢包的时候，拥塞控制策略会主动的退缩，降低发送速度，这就相当于本来环境就差，还自断臂膀，用户本来就卡，这下更卡了。
